<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="700px" preserveAspectRatio="none" style="width:782px;height:700px;background:#FFFFFF;" version="1.1" viewBox="0 0 782 700" width="782px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="580.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="177" y="67.4297"/><rect fill="#FFFFFF" height="378.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="388" y="240.2266"/><rect fill="#FFFFFF" height="436.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="644" y="211.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="36.2969" y2="665.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="182" x2="182" y1="36.2969" y2="665.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="393" x2="393" y1="36.2969" y2="665.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="649" x2="649" y1="36.2969" y2="665.6172"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="12" y="24.9951">Program</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="5" y="664.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="12" y="684.6123">Program</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="87" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="94" y="24.9951">DbContextOptionsBuilder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="87" y="664.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="94" y="684.6123">DbContextOptionsBuilder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="341" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="348" y="24.9951">ModelBuilder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="341" y="664.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="348" y="684.6123">ModelBuilder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="557" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="564" y="24.9951">ClaimRequestDbContext</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="557" y="664.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="564" y="684.6123">ClaimRequestDbContext</text><rect fill="#FFFFFF" height="580.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="177" y="67.4297"/><rect fill="#FFFFFF" height="378.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="388" y="240.2266"/><rect fill="#FFFFFF" height="436.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="644" y="211.0938"/><polygon fill="#181818" points="165,63.4297,175,67.4297,165,71.4297,169,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41" x2="171" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="48" y="62.3638">AddDbContext()</text><line style="stroke:#181818;stroke-width:1.0;" x1="187" x2="229" y1="96.5625" y2="96.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="229" x2="229" y1="96.5625" y2="109.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="188" x2="229" y1="109.5625" y2="109.5625"/><polygon fill="#181818" points="198,105.5625,188,109.5625,198,113.5625,194,109.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="194" y="91.4966">UseNpgsql(connectionString)</text><path d="M393,83.9297 L393,108.9297 L595,108.9297 L595,93.9297 L585,83.9297 L393,83.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M585,83.9297 L585,93.9297 L595,93.9297 L585,83.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="399" y="100.9966">Configure database provider</text><line style="stroke:#181818;stroke-width:1.0;" x1="187" x2="229" y1="168.9609" y2="168.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="229" x2="229" y1="168.9609" y2="181.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="188" x2="229" y1="181.9609" y2="181.9609"/><polygon fill="#181818" points="198,177.9609,188,181.9609,198,185.9609,194,181.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="194" y="133.6294">EnableRetryOnFailure(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="198" y="148.7622">maxRetryCount: 5,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="198" y="163.895">maxRetryDelay: 30s)</text><path d="M347,141.1953 L347,166.1953 L514,166.1953 L514,151.1953 L504,141.1953 L347,141.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M504,141.1953 L504,151.1953 L514,151.1953 L504,141.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="353" y="158.2622">Configure retry policies</text><polygon fill="#181818" points="632,207.0938,642,211.0938,632,215.0938,636,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="187" x2="638" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="194" y="206.0278">new(options)</text><polygon fill="#181818" points="409,236.2266,399,240.2266,409,244.2266,405,240.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="403" x2="643" y1="240.2266" y2="240.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="415" y="235.1606">OnModelCreating()</text><line style="stroke:#181818;stroke-width:1.0;" x1="398" x2="440" y1="269.3594" y2="269.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="440" y1="269.3594" y2="282.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="440" y1="282.3594" y2="282.3594"/><polygon fill="#181818" points="409,278.3594,399,282.3594,409,286.3594,405,282.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="405" y="264.2935">HasDefaultSchema("ClaimRequest")</text><line style="stroke:#181818;stroke-width:1.0;" x1="398" x2="440" y1="338.2578" y2="338.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="440" y1="338.2578" y2="351.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="440" y1="351.2578" y2="351.2578"/><polygon fill="#181818" points="409,347.2578,399,351.2578,409,355.2578,405,351.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="405" y="333.1919">ConfigureEnumConversions()</text><path d="M603,295.3594 L603,380.3594 L745,380.3594 L745,305.3594 L735,295.3594 L603,295.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M735,295.3594 L735,305.3594 L745,305.3594 L735,295.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="609" y="312.4263">Configure enums:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="609" y="327.5591">- Staff.SystemRole</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="609" y="342.6919">- Staff.Department</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="609" y="357.8247">- Project.Status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="609" y="372.9575">- Claim.Status</text><line style="stroke:#181818;stroke-width:1.0;" x1="398" x2="440" y1="426.3555" y2="426.3555"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="440" y1="426.3555" y2="439.3555"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="440" y1="439.3555" y2="439.3555"/><polygon fill="#181818" points="409,435.3555,399,439.3555,409,443.3555,405,439.3555" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="405" y="421.2896">ConfigureRelationships()</text><path d="M572,391.0234 L572,461.0234 L743,461.0234 L743,401.0234 L733,391.0234 L572,391.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M733,391.0234 L733,401.0234 L743,401.0234 L733,391.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="578" y="408.0903">Configure relationships:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="578" y="423.2231">- Claim-Claimer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="578" y="438.356">- Claim-Finance</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="578" y="453.4888">- Claim-Project</text><line style="stroke:#181818;stroke-width:1.0;" x1="398" x2="440" y1="506.8867" y2="506.8867"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="440" y1="506.8867" y2="519.8867"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="440" y1="519.8867" y2="519.8867"/><polygon fill="#181818" points="409,515.8867,399,519.8867,409,523.8867,405,519.8867" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="405" y="501.8208">ConfigureDecimalPrecision()</text><path d="M597,471.5547 L597,541.5547 L775,541.5547 L775,481.5547 L765,471.5547 L597,471.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M765,471.5547 L765,481.5547 L775,481.5547 L765,471.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="603" y="488.6216">Configure decimal(18,2):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="603" y="503.7544">- Claim.Amount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="603" y="518.8872">- Project.Budget</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="603" y="534.02">- Staff.Salary</text><line style="stroke:#181818;stroke-width:1.0;" x1="398" x2="440" y1="579.8516" y2="579.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="440" y1="579.8516" y2="592.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="440" y1="592.8516" y2="592.8516"/><polygon fill="#181818" points="409,588.8516,399,592.8516,409,596.8516,405,592.8516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="405" y="574.7856">ConfigureDateConversions()</text><path d="M597,552.0859 L597,607.0859 L746,607.0859 L746,562.0859 L736,552.0859 L597,552.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M736,552.0859 L736,562.0859 L746,562.0859 L736,552.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="603" y="569.1528">Configure DateOnly:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="603" y="584.2856">- Claim dates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="603" y="599.4185">- Project dates</text><polygon fill="#181818" points="632,614.4844,642,618.4844,632,622.4844,636,618.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="393" x2="638" y1="618.4844" y2="618.4844"/><polygon fill="#181818" points="52,643.6172,42,647.6172,52,651.6172,48,647.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="648" y1="647.6172" y2="647.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="58" y="642.5513">Return configured context</text><!--MD5=[918c91a8a0d9963335edc8a1d6b5ee0b]
@startuml
participant Program
participant DbContextOptionsBuilder
participant ModelBuilder
participant ClaimRequestDbContext

Program -> DbContextOptionsBuilder : AddDbContext()
activate DbContextOptionsBuilder

DbContextOptionsBuilder -> DbContextOptionsBuilder : UseNpgsql(connectionString)
note right: Configure database provider

DbContextOptionsBuilder -> DbContextOptionsBuilder : EnableRetryOnFailure(\n maxRetryCount: 5,\n maxRetryDelay: 30s)
note right: Configure retry policies

DbContextOptionsBuilder -> ClaimRequestDbContext : new(options)
activate ClaimRequestDbContext

ClaimRequestDbContext -> ModelBuilder : OnModelCreating()
activate ModelBuilder

ModelBuilder -> ModelBuilder : HasDefaultSchema("ClaimRequest")

ModelBuilder -> ModelBuilder : ConfigureEnumConversions()
note right
  Configure enums:
  - Staff.SystemRole
  - Staff.Department
  - Project.Status
  - Claim.Status
end note

ModelBuilder -> ModelBuilder : ConfigureRelationships()
note right
  Configure relationships:
  - Claim-Claimer
  - Claim-Finance
  - Claim-Project
end note

ModelBuilder -> ModelBuilder : ConfigureDecimalPrecision()
note right
  Configure decimal(18,2):
  - Claim.Amount
  - Project.Budget
  - Staff.Salary
end note

ModelBuilder -> ModelBuilder : ConfigureDateConversions()
note right
  Configure DateOnly:
  - Claim dates
  - Project dates
end note

ModelBuilder - -> ClaimRequestDbContext
deactivate ModelBuilder

ClaimRequestDbContext - -> Program : Return configured context
deactivate ClaimRequestDbContext
deactivate DbContextOptionsBuilder
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>