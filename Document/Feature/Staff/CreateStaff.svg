<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1148px" preserveAspectRatio="none" style="width:1682px;height:1148px;background:#FFFFFF;" version="1.1" viewBox="0 0 1682 1148" width="1682px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="823" style="stroke:#000000;stroke-width:1.5;" width="1665.5" x="10" y="227.8281"/><rect fill="none" height="660.5313" style="stroke:#000000;stroke-width:1.5;" width="1645.5" x="20" y="383.2969"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="933" x="722.5" y="655.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="315" x2="315" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="547" x2="547" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="779.5" x2="779.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1020.5" x2="1020.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1123.5" x2="1123.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1238.5" x2="1238.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1375.5" x2="1375.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1522.5" x2="1522.5" y1="81.2969" y2="1067.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1623.5" x2="1623.5" y1="81.2969" y2="1067.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="77.9951">Client</text><ellipse cx="52.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M52.5,21.5 L52.5,48.5 M39.5,29.5 L65.5,29.5 M52.5,48.5 L39.5,63.5 M52.5,48.5 L65.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="1079.8232">Client</text><ellipse cx="52.5" cy="1091.625" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M52.5,1099.625 L52.5,1126.625 M39.5,1107.625 L65.5,1107.625 M52.5,1126.625 L39.5,1141.625 M52.5,1126.625 L65.5,1141.625 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="256" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="263" y="69.9951">StaffsController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="256" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="263" y="1086.8232">StaffsController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="499" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="506" y="69.9951">IStaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="499" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="506" y="1086.8232">IStaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="732.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="739.5" y="69.9951">StaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="732.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="739.5" y="1086.8232">StaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="972.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="979.5" y="69.9951">StaffMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="972.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="979.5" y="1086.8232">StaffMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1078.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1085.5" y="69.9951">UnitOfWork</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1078.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1085.5" y="1086.8232">UnitOfWork</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1179.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1186.5" y="69.9951">StaffRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1179.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1186.5" y="1086.8232">StaffRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1307.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1314.5" y="69.9951">CloudinaryService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1307.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1314.5" y="1086.8232">CloudinaryService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="1453.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1460.5" y="69.9951">BCrypt.Net.BCrypt</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="1453.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1460.5" y="1086.8232">BCrypt.Net.BCrypt</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="1601.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1608.5" y="69.9951">Staff</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="1601.5" y="1066.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1608.5" y="1086.8232">Staff</text><polygon fill="#181818" points="303.5,108.4297,313.5,112.4297,303.5,116.4297,307.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="52.5" x2="309.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="59.5" y="107.3638">POST /api/staffs (CreateStaffRequest)</text><polygon fill="#181818" points="535.5,137.5625,545.5,141.5625,535.5,145.5625,539.5,141.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315.5" x2="541.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="322.5" y="136.4966">CreateStaff(CreateStaffRequest)</text><polygon fill="#181818" points="767.5,166.6953,777.5,170.6953,767.5,174.6953,771.5,170.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="547.5" x2="773.5" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="554.5" y="165.6294">CreateStaff(CreateStaffRequest)</text><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="821.5" y1="199.8281" y2="199.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="821.5" x2="821.5" y1="199.8281" y2="212.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="780.5" x2="821.5" y1="212.8281" y2="212.8281"/><polygon fill="#181818" points="790.5,208.8281,780.5,212.8281,790.5,216.8281,786.5,212.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="786.5" y="194.7622">Validate CreateStaffRequest</text><path d="M10,227.8281 L74,227.8281 L74,234.9609 L64,244.9609 L10,244.9609 L10,227.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="823" style="stroke:#000000;stroke-width:1.5;" width="1665.5" x="10" y="227.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="240.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="89" y="240.0386">[Validation Fails]</text><polygon fill="#181818" points="326.5,262.0938,316.5,266.0938,326.5,270.0938,322.5,266.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="320.5" x2="778.5" y1="266.0938" y2="266.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="332.5" y="261.0278">BadRequest</text><polygon fill="#181818" points="63.5,291.2266,53.5,295.2266,63.5,299.2266,59.5,295.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="314.5" y1="295.2266" y2="295.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="69.5" y="290.1606">400 Bad Request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1675.5" y1="304.2266" y2="304.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="15" y="314.437">[Validation Succeeds]</text><polygon fill="#181818" points="1112,335.1641,1122,339.1641,1112,343.1641,1116,339.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1118" y1="339.1641" y2="339.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="786.5" y="334.0981">BeginTransaction</text><polygon fill="#181818" points="1226.5,364.2969,1236.5,368.2969,1226.5,372.2969,1230.5,368.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1232.5" y1="368.2969" y2="368.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="786.5" y="363.231">Check if Email Exists</text><path d="M20,383.2969 L84,383.2969 L84,390.4297 L74,400.4297 L20,400.4297 L20,383.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="660.5313" style="stroke:#000000;stroke-width:1.5;" width="1645.5" x="20" y="383.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="396.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="87" x="99" y="395.5073">[Email Exists]</text><polygon fill="#181818" points="790.5,417.5625,780.5,421.5625,790.5,425.5625,786.5,421.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1237.5" y1="421.5625" y2="421.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="796.5" y="416.4966">Email Exists</text><polygon fill="#181818" points="326.5,446.6953,316.5,450.6953,326.5,454.6953,322.5,450.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="320.5" x2="778.5" y1="450.6953" y2="450.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="332.5" y="445.6294">BusinessException</text><polygon fill="#181818" points="63.5,475.8281,53.5,479.8281,63.5,483.8281,59.5,479.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="314.5" y1="479.8281" y2="479.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="69.5" y="474.7622">400 Bad Request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1665.5" y1="488.8281" y2="488.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="25" y="499.0386">[Email Does Not Exist]</text><polygon fill="#181818" points="790.5,519.7656,780.5,523.7656,790.5,527.7656,786.5,523.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1237.5" y1="523.7656" y2="523.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="796.5" y="518.6997">Email Does Not Exist</text><polygon fill="#181818" points="1008.5,548.8984,1018.5,552.8984,1008.5,556.8984,1012.5,552.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1014.5" y1="552.8984" y2="552.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="786.5" y="547.8325">Map CreateStaffRequest to Staff</text><polygon fill="#181818" points="790.5,578.0313,780.5,582.0313,790.5,586.0313,786.5,582.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1019.5" y1="582.0313" y2="582.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="796.5" y="576.9653">Staff Entity</text><polygon fill="#181818" points="1510.5,607.1641,1520.5,611.1641,1510.5,615.1641,1514.5,611.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1516.5" y1="611.1641" y2="611.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="786.5" y="606.0981">HashPassword(CreateStaffRequest.Password)</text><polygon fill="#181818" points="1611.5,636.2969,1621.5,640.2969,1611.5,644.2969,1615.5,640.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1617.5" y1="640.2969" y2="640.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="786.5" y="635.231">Set Default Values (Id, IsActive, etc.)</text><path d="M722.5,655.2969 L786.5,655.2969 L786.5,662.4297 L776.5,672.4297 L722.5,672.4297 L722.5,655.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="933" x="722.5" y="655.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="737.5" y="668.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="801.5" y="667.5073">[Avatar Provided]</text><polygon fill="#181818" points="1363.5,689.5625,1373.5,693.5625,1363.5,697.5625,1367.5,693.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1369.5" y1="693.5625" y2="693.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="786.5" y="688.4966">UploadImageAsync(CreateStaffRequest.Avatar)</text><polygon fill="#181818" points="790.5,718.6953,780.5,722.6953,790.5,726.6953,786.5,722.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1374.5" y1="722.6953" y2="722.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="796.5" y="717.6294">Avatar URL</text><polygon fill="#181818" points="1611.5,747.8281,1621.5,751.8281,1611.5,755.8281,1615.5,751.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1617.5" y1="751.8281" y2="751.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="786.5" y="746.7622">Set Avatar URL</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="722.5" x2="1655.5" y1="760.8281" y2="760.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132" x="727.5" y="771.0386">[No Avatar Provided]</text><polygon fill="#181818" points="1611.5,791.7656,1621.5,795.7656,1611.5,799.7656,1615.5,795.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1617.5" y1="795.7656" y2="795.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="786.5" y="790.6997">Set Default Avatar URL</text><polygon fill="#181818" points="1226.5,827.8984,1236.5,831.8984,1226.5,835.8984,1230.5,831.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1232.5" y1="831.8984" y2="831.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="786.5" y="826.8325">InsertAsync(Staff)</text><polygon fill="#181818" points="790.5,857.0313,780.5,861.0313,790.5,865.0313,786.5,861.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1237.5" y1="861.0313" y2="861.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="796.5" y="855.9653">Staff Inserted</text><polygon fill="#181818" points="1112,886.1641,1122,890.1641,1112,894.1641,1116,890.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1118" y1="890.1641" y2="890.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="786.5" y="885.0981">CommitTransaction</text><polygon fill="#181818" points="1008.5,915.2969,1018.5,919.2969,1008.5,923.2969,1012.5,919.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="779.5" x2="1014.5" y1="919.2969" y2="919.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="786.5" y="914.231">Map Staff to CreateStaffResponse</text><polygon fill="#181818" points="790.5,944.4297,780.5,948.4297,790.5,952.4297,786.5,948.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="784.5" x2="1019.5" y1="948.4297" y2="948.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="796.5" y="943.3638">CreateStaffResponse</text><polygon fill="#181818" points="558.5,973.5625,548.5,977.5625,558.5,981.5625,554.5,977.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="552.5" x2="778.5" y1="977.5625" y2="977.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="564.5" y="972.4966">CreateStaffResponse</text><polygon fill="#181818" points="326.5,1002.6953,316.5,1006.6953,326.5,1010.6953,322.5,1006.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="320.5" x2="546.5" y1="1006.6953" y2="1006.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="332.5" y="1001.6294">CreateStaffResponse</text><polygon fill="#181818" points="63.5,1031.8281,53.5,1035.8281,63.5,1039.8281,59.5,1035.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="314.5" y1="1035.8281" y2="1035.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="69.5" y="1030.7622">201 Created (CreateStaffResponse)</text><!--MD5=[8f5e547af664e11ede282f9dbd7ba3ce]
@startuml
actor Client
participant StaffsController
participant IStaffService
participant StaffService
participant StaffMapper
participant UnitOfWork
participant StaffRepository
participant CloudinaryService

Client -> StaffsController: POST /api/staffs (CreateStaffRequest)
StaffsController -> IStaffService: CreateStaff(CreateStaffRequest)
IStaffService -> StaffService: CreateStaff(CreateStaffRequest)
StaffService -> StaffService: Validate CreateStaffRequest
alt Validation Fails
    StaffService -> StaffsController: BadRequest
    StaffsController -> Client: 400 Bad Request
else Validation Succeeds
    StaffService -> UnitOfWork: BeginTransaction
    StaffService -> StaffRepository: Check if Email Exists
    alt Email Exists
        StaffRepository -> StaffService: Email Exists
        StaffService -> StaffsController: BusinessException
        StaffsController -> Client: 400 Bad Request
    else Email Does Not Exist
        StaffRepository -> StaffService: Email Does Not Exist
        StaffService -> StaffMapper: Map CreateStaffRequest to Staff
        StaffMapper -> StaffService: Staff Entity
        StaffService -> BCrypt.Net.BCrypt: HashPassword(CreateStaffRequest.Password)
        StaffService -> Staff: Set Default Values (Id, IsActive, etc.)
        alt Avatar Provided
            StaffService -> CloudinaryService: UploadImageAsync(CreateStaffRequest.Avatar)
            CloudinaryService -> StaffService: Avatar URL
            StaffService -> Staff: Set Avatar URL
        else No Avatar Provided
            StaffService -> Staff: Set Default Avatar URL
        end
        StaffService -> StaffRepository: InsertAsync(Staff)
        StaffRepository -> StaffService: Staff Inserted
        StaffService -> UnitOfWork: CommitTransaction
        StaffService -> StaffMapper: Map Staff to CreateStaffResponse
        StaffMapper -> StaffService: CreateStaffResponse
        StaffService -> IStaffService: CreateStaffResponse
        IStaffService -> StaffsController: CreateStaffResponse
        StaffsController -> Client: 201 Created (CreateStaffResponse)
    end
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>