<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1119px" preserveAspectRatio="none" style="width:1684px;height:1119px;background:#FFFFFF;" version="1.1" viewBox="0 0 1684 1119" width="1684px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="793.8672" style="stroke:#000000;stroke-width:1.5;" width="1667.5" x="10" y="227.8281"/><rect fill="none" height="631.3984" style="stroke:#000000;stroke-width:1.5;" width="1647.5" x="20" y="383.2969"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="789" x="868.5" y="626.1641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="341" x2="341" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="633" x2="633" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="925.5" x2="925.5" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1170.5" x2="1170.5" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1273.5" x2="1273.5" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1388.5" x2="1388.5" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1525.5" x2="1525.5" y1="81.2969" y2="1038.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1625.5" x2="1625.5" y1="81.2969" y2="1038.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="77.9951">Client</text><ellipse cx="52.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M52.5,21.5 L52.5,48.5 M39.5,29.5 L65.5,29.5 M52.5,48.5 L39.5,63.5 M52.5,48.5 L65.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="1050.6904">Client</text><ellipse cx="52.5" cy="1062.4922" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M52.5,1070.4922 L52.5,1097.4922 M39.5,1078.4922 L65.5,1078.4922 M52.5,1097.4922 L39.5,1112.4922 M52.5,1097.4922 L65.5,1112.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="282" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="289" y="69.9951">StaffsController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="282" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="289" y="1057.6904">StaffsController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="585" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="592" y="69.9951">IStaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="585" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="592" y="1057.6904">IStaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="878.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="885.5" y="69.9951">StaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="878.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="885.5" y="1057.6904">StaffService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="1122.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1129.5" y="69.9951">StaffMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="1122.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1129.5" y="1057.6904">StaffMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1228.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1235.5" y="69.9951">UnitOfWork</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1228.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1235.5" y="1057.6904">UnitOfWork</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1329.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1336.5" y="69.9951">StaffRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1329.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1336.5" y="1057.6904">StaffRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1457.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1464.5" y="69.9951">CloudinaryService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1457.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1464.5" y="1057.6904">CloudinaryService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="1603.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1610.5" y="69.9951">Staff</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="1603.5" y="1037.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1610.5" y="1057.6904">Staff</text><polygon fill="#181818" points="329.5,108.4297,339.5,112.4297,329.5,116.4297,333.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="52.5" x2="335.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="59.5" y="107.3638">PUT /api/staffs/{id} (UpdateStaffRequest)</text><polygon fill="#181818" points="621.5,137.5625,631.5,141.5625,621.5,145.5625,625.5,141.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="627.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="348.5" y="136.4966">UpdateStaff(Guid id, UpdateStaffRequest)</text><polygon fill="#181818" points="913.5,166.6953,923.5,170.6953,913.5,174.6953,917.5,170.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="633.5" x2="919.5" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="640.5" y="165.6294">UpdateStaff(Guid id, UpdateStaffRequest)</text><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="967.5" y1="199.8281" y2="199.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="967.5" x2="967.5" y1="199.8281" y2="212.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="926.5" x2="967.5" y1="212.8281" y2="212.8281"/><polygon fill="#181818" points="936.5,208.8281,926.5,212.8281,936.5,216.8281,932.5,212.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="932.5" y="194.7622">Validate UpdateStaffRequest</text><path d="M10,227.8281 L74,227.8281 L74,234.9609 L64,244.9609 L10,244.9609 L10,227.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="793.8672" style="stroke:#000000;stroke-width:1.5;" width="1667.5" x="10" y="227.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="240.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="89" y="240.0386">[Validation Fails]</text><polygon fill="#181818" points="352.5,262.0938,342.5,266.0938,352.5,270.0938,348.5,266.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346.5" x2="924.5" y1="266.0938" y2="266.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="358.5" y="261.0278">BadRequest</text><polygon fill="#181818" points="63.5,291.2266,53.5,295.2266,63.5,299.2266,59.5,295.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="340.5" y1="295.2266" y2="295.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="69.5" y="290.1606">400 Bad Request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1677.5" y1="304.2266" y2="304.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="15" y="314.437">[Validation Succeeds]</text><polygon fill="#181818" points="1262,335.1641,1272,339.1641,1262,343.1641,1266,339.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1268" y1="339.1641" y2="339.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="932.5" y="334.0981">BeginTransaction</text><polygon fill="#181818" points="1376.5,364.2969,1386.5,368.2969,1376.5,372.2969,1380.5,368.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1382.5" y1="368.2969" y2="368.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="932.5" y="363.231">Check if Staff Exists</text><path d="M20,383.2969 L84,383.2969 L84,390.4297 L74,400.4297 L20,400.4297 L20,383.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="631.3984" style="stroke:#000000;stroke-width:1.5;" width="1647.5" x="20" y="383.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="396.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="99" y="395.5073">[Staff Does Not Exist]</text><polygon fill="#181818" points="936.5,417.5625,926.5,421.5625,936.5,425.5625,932.5,421.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1387.5" y1="421.5625" y2="421.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="942.5" y="416.4966">Staff Not Found</text><polygon fill="#181818" points="352.5,446.6953,342.5,450.6953,352.5,454.6953,348.5,450.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346.5" x2="924.5" y1="450.6953" y2="450.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="358.5" y="445.6294">NotFoundException</text><polygon fill="#181818" points="63.5,475.8281,53.5,479.8281,63.5,483.8281,59.5,479.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="340.5" y1="479.8281" y2="479.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="69.5" y="474.7622">404 Not Found</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1667.5" y1="488.8281" y2="488.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="83" x="25" y="499.0386">[Staff Exists]</text><polygon fill="#181818" points="936.5,519.7656,926.5,523.7656,936.5,527.7656,932.5,523.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1387.5" y1="523.7656" y2="523.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="942.5" y="518.6997">Staff Found</text><polygon fill="#181818" points="1158.5,548.8984,1168.5,552.8984,1158.5,556.8984,1162.5,552.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1164.5" y1="552.8984" y2="552.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="932.5" y="547.8325">Map UpdateStaffRequest to Staff</text><polygon fill="#181818" points="936.5,578.0313,926.5,582.0313,936.5,586.0313,932.5,582.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1169.5" y1="582.0313" y2="582.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="942.5" y="576.9653">Updated Staff Entity</text><polygon fill="#181818" points="1613.5,607.1641,1623.5,611.1641,1613.5,615.1641,1617.5,611.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1619.5" y1="611.1641" y2="611.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="932.5" y="606.0981">Set Updated Values</text><path d="M868.5,626.1641 L932.5,626.1641 L932.5,633.2969 L922.5,643.2969 L868.5,643.2969 L868.5,626.1641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="789" x="868.5" y="626.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="883.5" y="639.231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="947.5" y="638.3745">[Avatar Provided]</text><polygon fill="#181818" points="1513.5,660.4297,1523.5,664.4297,1513.5,668.4297,1517.5,664.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1519.5" y1="664.4297" y2="664.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="932.5" y="659.3638">UploadImageAsync(UpdateStaffRequest.Avatar)</text><polygon fill="#181818" points="936.5,689.5625,926.5,693.5625,936.5,697.5625,932.5,693.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1524.5" y1="693.5625" y2="693.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="942.5" y="688.4966">Avatar URL</text><polygon fill="#181818" points="1613.5,718.6953,1623.5,722.6953,1613.5,726.6953,1617.5,722.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1619.5" y1="722.6953" y2="722.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="932.5" y="717.6294">Set Avatar URL</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="868.5" x2="1657.5" y1="731.6953" y2="731.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132" x="873.5" y="741.9058">[No Avatar Provided]</text><polygon fill="#181818" points="1613.5,762.6328,1623.5,766.6328,1613.5,770.6328,1617.5,766.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1619.5" y1="766.6328" y2="766.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="932.5" y="761.5669">Keep Current Avatar URL</text><polygon fill="#181818" points="1376.5,798.7656,1386.5,802.7656,1376.5,806.7656,1380.5,802.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1382.5" y1="802.7656" y2="802.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="932.5" y="797.6997">UpdateAsync(Staff)</text><polygon fill="#181818" points="936.5,827.8984,926.5,831.8984,936.5,835.8984,932.5,831.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1387.5" y1="831.8984" y2="831.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="942.5" y="826.8325">Staff Updated</text><polygon fill="#181818" points="1262,857.0313,1272,861.0313,1262,865.0313,1266,861.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1268" y1="861.0313" y2="861.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="932.5" y="855.9653">CommitTransaction</text><polygon fill="#181818" points="1158.5,886.1641,1168.5,890.1641,1158.5,894.1641,1162.5,890.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="925.5" x2="1164.5" y1="890.1641" y2="890.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="932.5" y="885.0981">Map Staff to UpdateStaffResponse</text><polygon fill="#181818" points="936.5,915.2969,926.5,919.2969,936.5,923.2969,932.5,919.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="930.5" x2="1169.5" y1="919.2969" y2="919.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="942.5" y="914.231">UpdateStaffResponse</text><polygon fill="#181818" points="644.5,944.4297,634.5,948.4297,644.5,952.4297,640.5,948.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="924.5" y1="948.4297" y2="948.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="650.5" y="943.3638">UpdateStaffResponse</text><polygon fill="#181818" points="352.5,973.5625,342.5,977.5625,352.5,981.5625,348.5,977.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346.5" x2="632.5" y1="977.5625" y2="977.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="358.5" y="972.4966">UpdateStaffResponse</text><polygon fill="#181818" points="63.5,1002.6953,53.5,1006.6953,63.5,1010.6953,59.5,1006.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="340.5" y1="1006.6953" y2="1006.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="69.5" y="1001.6294">200 OK (UpdateStaffResponse)</text><!--MD5=[425eb26d56b22e4e667f96ac2e55fc24]
@startuml
actor Client
participant StaffsController
participant IStaffService
participant StaffService
participant StaffMapper
participant UnitOfWork
participant StaffRepository
participant CloudinaryService

Client -> StaffsController: PUT /api/staffs/{id} (UpdateStaffRequest)
StaffsController -> IStaffService: UpdateStaff(Guid id, UpdateStaffRequest)
IStaffService -> StaffService: UpdateStaff(Guid id, UpdateStaffRequest)
StaffService -> StaffService: Validate UpdateStaffRequest
alt Validation Fails
    StaffService -> StaffsController: BadRequest
    StaffsController -> Client: 400 Bad Request
else Validation Succeeds
    StaffService -> UnitOfWork: BeginTransaction
    StaffService -> StaffRepository: Check if Staff Exists
    alt Staff Does Not Exist
        StaffRepository -> StaffService: Staff Not Found
        StaffService -> StaffsController: NotFoundException
        StaffsController -> Client: 404 Not Found
    else Staff Exists
        StaffRepository -> StaffService: Staff Found
        StaffService -> StaffMapper: Map UpdateStaffRequest to Staff
        StaffMapper -> StaffService: Updated Staff Entity
        StaffService -> Staff: Set Updated Values
        alt Avatar Provided
            StaffService -> CloudinaryService: UploadImageAsync(UpdateStaffRequest.Avatar)
            CloudinaryService -> StaffService: Avatar URL
            StaffService -> Staff: Set Avatar URL
        else No Avatar Provided
            StaffService -> Staff: Keep Current Avatar URL
        end
        StaffService -> StaffRepository: UpdateAsync(Staff)
        StaffRepository -> StaffService: Staff Updated
        StaffService -> UnitOfWork: CommitTransaction
        StaffService -> StaffMapper: Map Staff to UpdateStaffResponse
        StaffMapper -> StaffService: UpdateStaffResponse
        StaffService -> IStaffService: UpdateStaffResponse
        IStaffService -> StaffsController: UpdateStaffResponse
        StaffsController -> Client: 200 OK (UpdateStaffResponse)
    end
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>